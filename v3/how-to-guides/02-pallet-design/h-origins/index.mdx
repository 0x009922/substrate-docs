---
title: Define a custom origin as an account ID
slug: /how-to-guides/v3/pallet-design/account-id-origin
version: 3.0
section: how to guides
category: pallet design
difficulty: 2
---

This guide goes over a simple way to assign an account ID to an origin. This origin could be used 
from within the pallet its defined in but also in any other pallet it is tightly coupled to. This could
be used as the basis for creating similar origin capabilities as FRAME's democracy pallet, for example 
implementing a [special root origin](/rustdocs/latest/pallet_democracy/index.html#root).

## Use cases

- Create a special origin with Sudo-like access to specific dispatchables.
- Implement a dispatchable that can only be called by the origin defined from another pallet.

## Before you begin

Verify the following requirements:

- Read about Substrate's [origin system](/v3/runtime/origins/) to understand what they are and ways to use them.
- You already have a working pallet and dispatchable to implement a custom origin for.

## Steps

1. Start by adding an Orgin type to your pallet's `Config` trait. This type will be used when you implement 
   your pallet for your runtime:

  ```rust
  pub trait Config: frame_system::Config {
      // -- snip -- 
      type Origin: From<Origin>;
      #[pallet::constant]
      type SpecialAccountId: Get<Self::AccountId>;
  }
  ```

  Next, we'll create the enum for our custom origin. This will be used 
  when we implement `EnsureOrigin` on our custom origin.

1. Declare the enum and specify the origin name you want to use, for example: 
  
  ```rust
  // Our origins for this pallet.
  #[derive(PartialEq, Eq, Clone, RuntimeDebug, Encode, Decode, TypeInfo)]
  pub enum MyOrigins<AccountId> {
    SpecialOrigin(AccountId),
    Other
  }
  ```
  
1. Implement AccountId for MyOrigins.

  ```rust
  impl<AccountId> From<Option<AccountId>> for MyOrigins<AccountId> {
	fn from(s: Option<AccountId>) -> MyOrigins<AccountId> {
		match s {
			Some(who) => MyOrigins::SpecialOrigin(who),
			None => MyOrigins::Other,
      }
    }
  }
  ```

1. Create a struct to implement [`EnsureOrigin`](/rustdocs/latest/frame_support/traits/trait.EnsureOrigin.html) 
   on `MyOrigins`:

  ```rust
  pub struct EnsureAccountOrigin<Who, AccountId>(sp_std::marker::PhantomData<(Who, AccountId)>);
  ```

1. Write the implementation of `try_origin` and `succesful_origin` for our custom struct:

  ```rust
  impl<
      O: Into<Result<MyOrigins<AccountId>, O>> + From<MyOrigins<AccountId>>,
		  Who: SortedMembers<AccountId>,
		  AccountId: PartialEq + Clone + Ord + Default,        
      > EnsureOrigin<O> for EnsureAccountOrigin<Who, AccountId>

      type Success = AccountId;
      fn try_origin(o: O) -> Result<Self::Success, O> {
        o.into().and_then(|o| match o {
          RawOrigin::Signed(ref who) if Who::contains(who) => Ok(who.clone()),
          r => Err(O::from(r)),
        })
      }

      #[cfg(feature = "runtime-benchmarks")]
      fn successful_origin() -> O {
        O::from(MyOrigins::Root)
      }
    }
  ```

  In the above implementation, we're using `try_origin` from `EnsureOrigin` to ensure the origin matches what we specified
  in our pallet's configuration trait, i.e. `SpecialOrigin`.

  We have the basis to start using `SpecialAccountId` as our custom origin. Before using it in our pallet's dispatchables,
  we'll first need to specify what this account ID is for our runtime. 

1. In `runtime/src/lib.rs`, add the [`ord_parameter_types`](/rustdocs/latest/frame_support/macro.ord_parameter_types.html) macro 
   with the account ID you wish to use to define your custom origin for your runtime: 

  ```rust
  // Define the account ID to control the origin in my_custom_pallet, make sure to store your key pairs.
  frame_support::ord_parameter_types! {
    // ID derived by running `subkey inspect //SpecialAccountId`
    // See: https://docs.substrate.io/v3/tools/subkey/
    pub const SpecialAccountId: AccountId = AccountId::from(hex_literal::hex!["60f28d2abe90a6bbfef78dc50bf798d52582b1da3868d8f470b22831e5edac73"]);
  }
  ```
  Make sure you to add the [`hex_literal`]() dependency in `runtime/Cargo.toml` and remove it from `runtime-benchmarks` features.

1. Add the `SpecialAccountId` type to the runtime implementation of your pallet:

  ```rust
  impl my_custom_pallet::Config for Runtime {
    type Event = Event;
    type SpecialAccountId = SpecialAccountId;
  }
  ```

1. Use `SpecialAccountId` in your dispatchable:

  ```rust
  pub fn special_function(
      origin: OriginFor<T>, 
      something: u32
      ) -> DispatchResult {
        let who = ensure_signed(origin)?;
        ensure!(who == T::SpecialAccountId::get(), DispatchError::BadOrigin);
        // Some dispatchable logic here.
        // Return a successful DispatchResult.
        Ok(())
      }
  ```

## Examples

- Custom `RawOrigin` enum in FRAME'S [Collective pallet](/rustdocs/latest/src/pallet_collective/lib.rs.html#158)
- `EnsureMember` from FRAME's [Collective pallet](/rustdocs/latest/src/pallet_collective/lib.rs.html#878)
- Different origins in the [Membership pallet](https://github.com/paritytech/substrate/blob/master/frame/membership/src/lib.rs#L40-L53) 


## Resources

- [`EnsureOrigin`](https://substrate.dev/rustdocs/latest/frame_support/pallet_prelude/trait.EnsureOrigin.html)
- [frame_support::ord_parameter_types!](/rustdocs/latest/frame_support/macro.ord_parameter_types.html)
