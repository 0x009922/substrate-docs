---
title: Start a private network
slug: /tutorials/v3/private-network
hideNav: true
version: 3.0 
section: tutorials
category: private network
keywords: permissioned, consortium, authority, network
difficulty: 1
duration: 2 Hour
relevantSkills: 
  - Rust 
  - Blockchain basics
  - FRAME
---

This tutorial provides a basic introduction to the **consensus** model used in the Substrate node template and how to start a blockchain network with an
**authority set** of private **validators**.

All blockchains require the nodes in the network to agree on the set of messages and their order to successfully create blocks and progress from one block to the next.
Each block represents state at a specific point in time and the nodes agreement on the state is called consensus.
There are several differnt algorithms used to reach consensus, including:

* Proof of work consensus depends on the computational work done by validator nodes to add valid blocks to the chain.

* Proof of stake consensus selects the validators add valid blocks to the chain based on the cryptocurrency holdings that they have locked up as a stake in the network.

* Proof of authority consensus relies on a set of approved account identities to act as validators. The nodes associated with approved accounts have the authority to put transactions into blocks.

The Substrate node template uses a proof of authority consensus model also referred to as **authority round** or **Aura** consensus.
The Aura consensus protocol limits block production to a rotating list of authorized accounts‚Äî**authorities**‚Äîthat create blocks in a round robin fashion.

In this tutorial, you'll see how this consensus model works in practice, first, by using the predefined accounts that are part of the node template, then by adding a new authority to the approved set.

## Before you begin

<TutorialObjective
  data={{
    textLineOne:
      'Start the blockchain using predefined accounts.',
      url: '/tutorials/v3/private-network#alice-and-bob-start-blockchain',
  }}
/>
<TutorialObjective
  data={{
    textLineOne:
      'Generate keypairs for use as a network authority.',
    url: '#generate-your-own-keys',
  }}
/>
<TutorialObjective
  data={{
    textLineOne:
      'Create a custom chain specification file.',
    url: '#create-a-custom-chain-spec',
  }}
/>
<TutorialObjective
  data={{
    textLineOne:
      'Launch your private blockchain network.',
    url: '#launch-your-private-network',
  }}
/>

## Start the blockchain using predefined accounts

Before you generate keys to start your own private Substrate network, you can learn the fundamental principles using a predefined network specification called `local` and predefined user accounts.

For this part of the tutorial, you should have the Substrate node template running on a single local computer with predefined accounts that are named Alice and Bob.

### Start the blockchain as Alice

To start the blockchain:

1. Open a terminal shell on your computer.

1. Change to the root directory where you compiled the Substrate node template.

1. Purge old chain data by running the following command:
    
    ```bash
    ./target/release/node-template purge-chain --base-path /tmp/alice --chain local
    ```
    The command prompts you to confirm the operation.

    ```bash
    Are you sure to remove "/tmp/alice/chains/local_testnet/db"? [y/N]:
    ```

1. Type `y` to confirm that you want to remove the chain data.
    
    You should always remove old chain data when starting a new network.

1. Start the local blockchain node using the alice account by running the following command:
    
    ```bash
    ./target/release/node-template \
    --base-path /tmp/alice \
    --chain local \
    --alice \
    --port 30333 \
    --ws-port 9945 \
    --rpc-port 9933 \
    --node-key 0000000000000000000000000000000000000000000000000000000000000001 \
    --telemetry-url 'wss://telemetry.polkadot.io/submit/ 0' \
    --validator
    ```

#### Review the command-line options

Before moving on, let's take a closer look at the options used to start the node templates.

| <div style="min-width:110pt;font-weight:bold;">Option</div> | <div style="font-weight:bold;">Description</div> |
|:------------------------------ |: ---------------------------------------------- |
| `--base-path` | Specifies the directory for storing all of the data related to this chain. If you don't specify this option, a default path is used. If you specify a directory that doesn'o't exist, it is created for you. If the directory you specify already contains blockchain data, you must remove the data from the directory or choose a different location for the command to start the node to succeed. |
| `--chain local` | Specifies the chain specification to use. Valid predefined chain specifications include `local`, `development`, and `staging`. Generally, you would specify your own chain specification file. You'll see how to create your own chain specification file in a later step. |
| `--alice` | Places the predefined keys for the Alice account in the node's keystore. With this setting, the `alice` account is used for block production and finalization. Generally, you would generate your own keys and insert them with an RPC call. You'll see how to generate your own keys in a later step. |
| `--port 30333` | Specifies the port to listen on for p2p traffic. Port `30333` is the default. You can omit this option to use the default. Because this tutorial uses to nodes running on the same physical computer to simulate a network, you must explicitly specify a different port for at least one account. |
| `--ws-port 9945`  | Specifies the port to listen on for incoming WebSocket traffic. The default value is `9944`. This example uses a custom web socket port number (`9945`). |
| `--rpc-port 9933` | Specifies the port to listen on for incoming RPC traffic. Port `9933` is the default. You can omit this option to use the default. |
| `--node-key <key>` | Specifies the Ed25519 secret key to use for `libp2p` networking. The value is parsed as a hex-encoded Ed25519 32-byte secret key, that is, 64 hex characters. WARNING: Secrets provided as command-line arguments are easily exposed. You should only use this option for development and testing. |
| `--telemetry-url` | Specifies where to send telemetry data. For this tutorial, you can send telemetry data to a server hosted by Parity that is available for anyone to use. You can specify a differnet server or omit this option. |
| `--validator` | Specifies that this node participates in block production and finalization for the network. |

For more information about the command-line options that are available for started the node template, see the usage help by running the following command:

`./target/release/node-template --help`

#### Review the node messages displayed

If the node starts successfully, the terminal displays messages describing network operations. 
For example, you should see output similar to this:

```
2021-03-10 17:34:27  Substrate Node
2021-03-10 17:34:27  ‚úåÔ∏è  version 3.0.0-1c5b984-x86_64-linux-gnu
2021-03-10 17:34:27  ‚ù§Ô∏è  by Substrate DevHub <https://github.com/substrate-developer-hub>, 2017-2021
2021-03-10 17:34:27  üìã Chain specification: Local Testnet
2021-03-10 17:34:27  üè∑ Node name: Alice
2021-03-10 17:34:27  üë§ Role: AUTHORITY
2021-03-10 17:34:27  üíæ Database: RocksDb at /tmp/alice/chains/local_testnet/db
2021-03-10 17:34:27  ‚õì  Native runtime: node-template-100 (node-template-1.tx1.au1)
2021-03-10 17:34:27  üî® Initializing Genesis block/state (state: 0xea47‚Ä¶9ba8, header-hash: 0x9d07‚Ä¶7cce)
2021-03-10 17:34:27  üë¥ Loading GRANDPA authority set from genesis on what appears to be first startup.
2021-03-10 17:34:27  ‚è±  Loaded block-time = 6000 milliseconds from genesis on first-launch
2021-03-10 17:34:27  Using default protocol ID "sup" because none is configured in the chain specs
2021-03-10 17:34:27  üè∑ Local node identity is: 12D3KooWEyoppNCUx8Yx66oV9fJnriXwCcXwDDUA2kj6vnc6iDEp
2021-03-10 17:34:27  üì¶ Highest known block at #0
2021-03-10 17:34:27  „ÄΩÔ∏è Prometheus server started at 127.0.0.1:9615
2021-03-10 17:34:27  Listening for new connections on 127.0.0.1:9945.
2021-03-10 17:34:32  üí§ Idle (0 peers), best: #0 (0x9d07‚Ä¶7cce), finalized #0 (0x9d07‚Ä¶7cce), ‚¨á 0 ‚¨Ü 0
2021-03-10 17:34:37  üí§ Idle (0 peers), best: #0 (0x9d07‚Ä¶7cce), finalized #0 (0x9d07‚Ä¶7cce), ‚¨á 0 ‚¨Ü 0
...
```

There are a few key messages you should notice in the output displayed.

* `üî® Initializing Genesis block/state (state: 0xea47‚Ä¶9ba8, header-hash: 0x9d07‚Ä¶7cce)` identifies the initial or **genesis block** that the node is using. 
  When you start the next node, verify that these values are equal.

* `üè∑ Local node identity is: 12D3KooWEyoppNCUx8Yx66oV9fJnriXwCcXwDDUA2kj6vnc6iDEp` shows the peer ID that the node started by Bob will need from Alice's node. This value was determined by the `--node-key` that was used to start Alice's node.
   
* No blocks are being produced yet. Blocks will start being produced once another node joins the network.

### Attach a front-end to see information about the node

You can see a lot of information about node operations by watching the output it produces in your terminal.
You can also view information about node operations by using a web browser to access the Polkadot-JS graphical user interface.

To view node operations using the Polkadot-JS application:

1. Open a web browser.

1. Navigate to the
[Polkadot-JS Explorer](https://polkadot.js.org/apps/?rpc=ws%3A%2F%2F127.0.0.1%3A9945#/explorer).
    
  The Polkadot-JS Explorer link uses the `rpc` URL parameter to connect to the local node.

  Some browsers have ad blocking features that prevent connecting to a local node.
  If you have trouble connecting to the local node, see if you have ad blocking enabled and disable it, as needed. 
	If your braowser prevents connections to a local node, try using another browser, like Chromium or downloading and hosting the [Polkadot-JS application](https://github.com/polkadot-js/apps#development) locally.

1. Click the network icon displayed in the top left corner of the Polkadot-JS Explorer page.

  ![Display the list of networks](../../../src/images/tutorials/05-private-network/private-network-top-left-network-icon.png)

1. Expand **DEVELOPMENT** at the bottom of the list of networks available.

  ![Display DEVELOPMENT networks](../../../src/images/tutorials/05-private-network/polkadot-list-networks.png)

1. Verify the custom endpoint is set to `ws://127.0.0.1:9945`.
  
    You can use a single instance of the Polkadot-JS application to connect to different networks, nodes, and endpoints.
    For more information about using the Polkadot-JS application, see XXX.

    ![Custom endpoint](../../../src/images/tutorials/05-private-network/private-network-custom-endpoint.png)

    You should now see something like this displayed in the Polkadot-JS Explorer **Network** page.

    ![No blocks displayed in Polkadot-JS](../../../src/images/tutorials/05-private-network/private-network-no-blocks.png)

### Add a node to the blockchain network as Bob

Now that the node you started using the `alice` account keys is running, you can add another node to the network using the `bob` account.
Because you are joining a network that is already running, you can use the running node to bootstrap the new node.
The commands are similar to the ones you used before, but with a few important differences.

To add a node to the running blockchain:

1. Open a **new** terminal shell on your computer.

1. Change to the root directory where you compiled the Substrate node template.

1. Purge old chain data by running the following command:
        
    ```bash
    ./target/release/node-template purge-chain --base-path /tmp/bob --chain local
    ```

1. Start a second local blockchain node using the `bob` account by running the following command:
    
    ```bash
    ./target/release/node-template \
    --base-path /tmp/bob \
    --chain local \
    --bob \
    --port 30334 \
    --ws-port 9946 \
    --rpc-port 9934 \
    --telemetry-url 'wss://telemetry.polkadot.io/submit/ 0' \
    --validator \
    --bootnodes /ip4/127.0.0.1/tcp/30333/p2p/12D3KooWEyoppNCUx8Yx66oV9fJnriXwCcXwDDUA2kj6vnc6iDEp
    ```
    
    Take note of the following differences between this command and the previous on.
    
    * Because the two nodes are running on the same physical computer, you must specify different values for the `--base-path`, `--port`, `--ws-port`, and `--rpc-port` options.

    * This command includes the `--bootnodes` option and specifies a single boot node, the node started by `alice` using the following information:
      
      * The IP address for the running node. In this case, the IP address uses the IPv4 (`ip4`) format and the address for the localhost `127.0.0.1`.
      
      * The port number used for peer-to-peer communication. In this case, the port number for TCP traffic is `30333`.
      
      * The peer identifier for the running node that you made note of in the console output. In this case, `12D3KooWEyoppNCUx8Yx66oV9fJnriXwCcXwDDUA2kj6vnc6iDEp`.
      
      After a few seconds, the nodes should connect to each other as peers and start producing blocks. 
      You should see lines like the following in the console that started first node:
      
      ```
      ...
      2021-03-10 17:47:32  üîç Discovered new external address for our node: /ip4/127.0.0.1/tcp/30333/p2p/12D3KooWEyoppNCUx8Yx66oV9fJnriXwCcXwDDUA2kj6vnc6iDEp
      2021-03-10 17:47:32  üîç Discovered new external address for our node: /ip4/<your computer's LAN IP>/tcp/30333/p2p/12D3KooWEyoppNCUx8Yx66oV9fJnriXwCcXwDDUA2kj6vnc6iDEp
      2021-03-10 17:47:33  üí§ Idle (1 peers), best: #0 (0x9d07‚Ä¶7cce), finalized #0 (0x9d07‚Ä¶7cce), ‚¨á 1.0kiB/s ‚¨Ü 1.0kiB/s
      2021-03-10 17:47:36  üôå Starting consensus session on top of parent 0x9d07d1757a9ca248e58141ce52a11fca37f71007dec16650b87a853f0d4c7cce
      2021-03-10 17:47:36  üéÅ Prepared block for proposing at 1 [hash: 0x727826a5e6fba9a13af11422d4677b5f0743cc733c382232328e69fd307d1d2f; parent_hash: 0x9d07‚Ä¶7cce; extrinsics (1): [0x768a‚Ä¶a9e2]]
      2021-03-10 17:47:36  üîñ Pre-sealed block for proposal at 1. Hash now 0x4841d8b2e62483fa4702b3ddcd1b603803842374dcdc1e9533ad407708b33dd8, previously 0x727826a5e6fba9a13af11422d4677b5f0743cc733c382232328e69fd307d1d2f.
      2021-03-10 17:47:36  ‚ú® Imported #1 (0x4841‚Ä¶3dd8)
      2021-03-10 17:47:36  ‚ú® Imported #1 (0xb241‚Ä¶2ae8)
      2021-03-10 17:47:38  üí§ Idle (1 peers), best: #1 (0x4841‚Ä¶3dd8), finalized #0 (0x9d07‚Ä¶7cce), ‚¨á 0.8kiB/s ‚¨Ü 0.8kiB/s
      2021-03-10 17:47:42  ‚ôªÔ∏è  Reorg on #1,0x4841‚Ä¶3dd8 to #2,0x8b6a‚Ä¶dce6, common ancestor #0,0x9d07‚Ä¶7cce
      2021-03-10 17:47:42  ‚ú® Imported #2 (0x8b6a‚Ä¶dce6)
      2021-03-10 17:47:43  üí§ Idle (1 peers), best: #2 (0x8b6a‚Ä¶dce6), finalized #0 (0x9d07‚Ä¶7cce), ‚¨á 0.8kiB/s ‚¨Ü 0.7kiB/s
      2021-03-10 17:47:48  üôå Starting consensus session on top of parent 0x8b6a3ab2fe9891b1af008ea0d92dae9bc84cfa5578231e81066d47928822dce6
      2021-03-10 17:47:48  üéÅ Prepared block for proposing at 3 [hash: 0xb887aef2097eff5869e38ccec0302bce372ad05ac2cdf9cc4725c38ec071fb7a; parent_hash: 0x8b6a‚Ä¶dce6; extrinsics (1): [0x82ac‚Ä¶2f20]]
      2021-03-10 17:47:48  üîñ Pre-sealed block for proposal at 3. Hash now 0x34d608dd8be6b82bef4a7aaae1ec80930a5c4b8cf9bdc99013410e91544f3a2a, previously 0xb887aef2097eff5869e38ccec0302bce372ad05ac2cdf9cc4725c38ec071fb7a.
      2021-03-10 17:47:48  ‚ú® Imported #3 (0x34d6‚Ä¶3a2a)
      2021-03-10 17:47:48  üí§ Idle (1 peers), best: #3 (0x34d6‚Ä¶3a2a), finalized #0 (0x9d07‚Ä¶7cce), ‚¨á 0.7kiB/s ‚¨Ü 0.8kiB/s
      2021-03-10 17:47:53  üí§ Idle (1 peers), best: #3 (0x34d6‚Ä¶3a2a), finalized #1 (0xb241‚Ä¶2ae8), ‚¨á 0.6kiB/s ‚¨Ü 0.7kiB/s
      2021-03-10 17:47:54  ‚ú® Imported #4 (0x2b8a‚Ä¶fdc4)
      2021-03-10 17:47:58  üí§ Idle (1 peers), best: #4 (0x2b8a‚Ä¶fdc4), finalized #2 (0x8b6a‚Ä¶dce6), ‚¨á 0.7kiB/s ‚¨Ü 0.6kiB/s
      ...
      ```
      
      These lines show that the first node started by `alice` has a one peer (`1 peers`), they have produced some blocks (`best: #4 (0x2b8a‚Ä¶fdc4)`), and that the blocks are being finalized (`finalized #2 (0x8b6a‚Ä¶dce6)`).
      
      If you look at the console that started the second node, you should see similar output.

1. Open the [Polkadot-JS Explorer](https://polkadot.js.org/apps/?rpc=ws%3A%2F%2F127.0.0.1%3A9945#/explorer) to verify the network is producing and finalizing blocks.
    
    ![Blocks are produced and finalized](../../../src/images/tutorials/05-private-network/private-network-displays-blocks.png)

    After you've verified that both nodes are running as expected, you can shut them down to prevent port and chain specification conflicts.

1. Return to the terminal shell where the node output is displayed and press Control-c to terminate the process, then repeat in the second terminal shell to stop all running nodes.

## Generate your own keys

Now that you know how to start and connect running nodes as peers using command-line options, you are ready to generate you own secret keys instead of using the predefined account keys. 
It's important to remember that each participant in the blockchain network is responsible for generating unique keys. 

There are several ways you can generate keys.
For example, you can generate keypairs using a `node-template` subcommand, the (<a target="_blank" href="/v3/tools/subkey">Subkey</a>) command-line program, the Polkadot-JS application, or third-party key generation utilties.

Although you could use predefined keypairs to complete this tutorial, you would never use those keys in a production environment.
Instead of using predefined keys or the `subkey` program, this tutorial illustrates how to generate keys using `node-template` command-line options.

### Use the node template to generate keys

You have already used the some command-line options to start your local blockchain node using the predefined Alice and Bob accounts.
You can also use command-line options to generate random keys to use with Substrate.

For this tutorial, you can remain connected to the internet and use your local node to generate your keys. 
As a best practice, you should never be connected to the internet when you generate keys for a production blockchain. 
For a production environment, you should disconnect from the internet before you generate any keys.

To generate keys using the node template:

1. Open a terminal shell on your computer.

1. Change to the root directory where you compiled the Substrate node template.

1. Generate a random secret phrase and keys by running the following command:
    
    ```bash
    ./target/release/node-template key generate --scheme Sr25519 --password-interactive
    ```

1. Type a password for the generated keys.
    
    The command generates keys and displays output similar to the following:

    ```bash
    Secret phrase:  pig giraffe ceiling enter weird liar orange decline behind total despair fly
    Secret seed:       0x0087016ebbdcf03d1b7b2ad9a958e14a43f2351cd42f2f0a973771b90fb0112f
    Public key (hex):  0x1a4cc824f6585859851f818e71ac63cf6fdc81018189809814677b2a4699cf45
    Account ID:        0x1a4cc824f6585859851f818e71ac63cf6fdc81018189809814677b2a4699cf45
    Public key (SS58): 5CfBuoHDvZ4fd8jkLQicNL8tgjnK8pVG9AiuJrsNrRAx6CNW
    SS58 Address:      5CfBuoHDvZ4fd8jkLQicNL8tgjnK8pVG9AiuJrsNrRAx6CNW
    ```

1. Use the secret seed for the account you generated to derive keys using the Ed25519 signature scheme by running the following command:
    
    ```bash
    ./target/release/node-template key inspect --password-interactive --scheme Ed25519 0x0087016ebbdcf03d1b7b2ad9a958e14a43f2351cd42f2f0a973771b90fb0112f
    ```

1. Type the password you used to the generated keys.
    
    The command displays output similar to the following:

    ```bash
    Secret Key URI `0x0087016ebbdcf03d1b7b2ad9a958e14a43f2351cd42f2f0a973771b90fb0112f` is account:
    Secret seed:       0x0087016ebbdcf03d1b7b2ad9a958e14a43f2351cd42f2f0a973771b90fb0112f
    Public key (hex):  0x2577ba03f47cdbea161851d737e41200e471cd7a31a5c88242a527837efc1e7b
    Account ID:        0x2577ba03f47cdbea161851d737e41200e471cd7a31a5c88242a527837efc1e7b
    Public key (SS58): 5CuqCGfwqhjGzSqz5mnq36tMe651mU9Ji8xQ4JRuUTvPcjVN
    SS58 Address:      5CuqCGfwqhjGzSqz5mnq36tMe651mU9Ji8xQ4JRuUTvPcjVN
    ```

    You now have the Sr25519 key for producing blocks using `aura` and the Ed25519 key for finalizing blocks using `grandpa` for one node.

    * 5CfBuoHDvZ4fd8jkLQicNL8tgjnK8pVG9AiuJrsNrRAx6CNW for `aura`.
    * 5CuqCGfwqhjGzSqz5mnq36tMe651mU9Ji8xQ4JRuUTvPcjVN for `grandpa`.

1. Repeat the steps to generate a second key pair or recruit other participants to generate the keys required to join your private network.
    
    For this tutorial, the private network consists of just two nodes, so you need two sets of keys. 
    For illustration purposes, the second set of keys are:

    * 5CXGP4oPXC1Je3zf5wEDkYeAqGcGXyKWSRX2Jm14GdME5Xc5 for `aura`.
    * 5DpdMN4bVTMy67TfMMtinQTcUmLhZBWoWarHvEYPM4jYziqm for `grandpa`.

## Create a custom chain specification

After you generate the keys to use with your blockchain, you are ready to create a custom **chain specification** using those key pairs then share your custom chain specicification with trusted network participants called **validators**.

To enable others to participate in your blockchain network, you should ensure that they generate their own keys. 
If other participants have generated their key pairs, you can create a custom chain specification to replace the `local` chain specification that you used previously.

This tutorial shows you hows to create a two-node network.
You can follow the same steps to add more nodes to your network.

### Modify an existing chain specification

Previously, you added nodes to the blockchain using the predefined `local` chain specification using the `--chain local` command-line option. 
Instead of writing a completely new chain specicification, you can modify the one that you have used before. 

To create a new chain specification based on an existng specifications:

1. Open a terminal shell on your computer.

1. Change to the root directory where you compiled the Substrate node template.

1. Export the local chain specicification to a file named `customSpec.json` by running the following command: 
    
    ```bash
    ./target/release/node-template build-spec --disable-default-bootnode --chain local > customSpec.json
    ```

    If you were to open the `customSpec.json` file in a text editor, you would see that it contains several fields, including a large blob that contains the Wasm binary for the runtime you built using the `cargo build --release` command.
    Instead of viewing the entire file, let's look at the first and last few lines.

1. View the first few fields in the `customSpec.json` file by running the following command:
    
    ```bash
    head customSpec.json
    ```

    The command displays the first fields from the file.
    For example:

    ```bash
    {
      "name": "Local Testnet",
      "id": "local_testnet",
      "chainType": "Local",
      "bootNodes": [],
      "telemetryEndpoints": null,
      "protocolId": null,
      "properties": null,
      "consensusEngine": null,
      "codeSubstitutes": {},
    ```

1. View the last fields in the `customSpec.json` file by running the following command:
    
    ```bash
    tail -n 80 customSpec.json
    ```
    
    This command displays the last sections following the Wasm binary field, including the details for several of the pallets‚Äîsuch as the `sudo` and `balances` pallets‚Äîthat are used in the runtime.

1. Open the `customSpec.json` file in a text editor.

1. Modify the `name` field to identify this chain specification as a custom chain specification.
    
    For example:

    ```json
    "name": "My Custom Testnet",
    ```

1. Modify `aura` field to specify the authority nodes that should be used for creating blocks by adding the Sr25519 SS58 address keys for each network Participants.
    
    ```json
    "aura": {
        "authorities": [
          "5CfBuoHDvZ4fd8jkLQicNL8tgjnK8pVG9AiuJrsNrRAx6CNW",
          "5CXGP4oPXC1Je3zf5wEDkYeAqGcGXyKWSRX2Jm14GdME5Xc5"
        ]
      },
    ```

1. Modify the `grandpa` field to specify the authorities that should be used for finalizing blocks by adding the Ed25519 SS58 address keys for each network participant. 
    
    ```json
    "grandpa": {
        "authorities": [
          [
            "5CuqCGfwqhjGzSqz5mnq36tMe651mU9Ji8xQ4JRuUTvPcjVN",
            1
          ],
          [
            "5DpdMN4bVTMy67TfMMtinQTcUmLhZBWoWarHvEYPM4jYziqm",
            1
          ]
        ]
      },
      ```

      You might notice that there are two data values for the Grandpa `authorities` field. The first value is the address key. The second value is used to support **weighted votes**. In this example, each validator has a weight of **1** vote.

1. Save your changes and close the file.

### Add validators

As you have just seen, you can add and change the authority addresses in a chain specification by modifying the `aura` and `grandpa` sections. 
You can use this technique to add as many validators as
you like.

To add validators:

* Modify the `aura` section to include **Sr25519** addresses.

* Modify the `grandpa` section to include **Ed25519** addresses and a voting weight. 
 
Be sure to use unique keys for each validator. 
If two validators have the same keys, they produce conflicting blocks. 

For additional information about working with key pairs and signatures, see [Public-Key cryptography](/v3/advanced/cryptography#public-key-cryptography).

### Convert the chain specification to use the raw format

After you prepare a chain specification with the information you want to use, you must convert it into a raw specification before it can be used. 
The raw chain specification includes all of the same information as the unconverted specification.
However, the raw chain specification also contains encoded storage keys that the node uses to reference the data in its local storage. 
Distributing a raw chain specification ensures that each node stores the data using the proper storage keys.

To convert a chain specification to use the raw format:

1. Open a terminal shell on your computer.

1. Change to the root directory where you compiled the Substrate node template.

1. Convert the `customSpec.json` chain specicification to the raw format with the file name `customSpecRaw.json` by running the following command: 
    
    ```bash
    ./target/release/node-template build-spec --chain=customSpec.json --raw --disable-default-bootnode > customSpecRaw.json
    ```

### Share the chain specification with others

If you are creating a private blockchain network to share with other participants, you should ensure that only one person creates the chain specifiction and shares the resulting raw version of the specification‚Äîfor example, the `customSpecRaw.json` file‚Äîwith all of the other validators in the network. 

Because Rust builds that produce WebAssembly optimized binaries aren't reproducible, each person who generates the Wasm runtime would produce a slightly different Wasm blob. 
To ensure determinism, all participants in the blockchain network should use the same raw chain specification file.
For more information about this issue, see [Hunting down a non-determinism-bug in our Rust Wasm build](https://dev.to/gnunicorn/hunting-down-a-non-determinism-bug-in-our-rust-wasm-build-4fk1).

## Launch the private network

After you distribute the custom chain specification to all network participants, you're ready to launch your own private blockchain. 
The steps are similar to the steps you followed in [Start the blockchain using predefined accounts](#Start-the-blockchain-using-predefined-accounts). 
For this part of the tutorial, you are no longer required to use a single physical computer or a single binary.

### Start a first node

As the first participant in the private blockchain network, you are responsible for starting the first node, called the **bootnode**.

To start the first node:

1. Open a terminal shell on your computer.

1. Change to the root directory where you compiled the Substrate node template.

1. Purge old chain data, if needed, by running the following command:
    
    ```bash
    ./target/release/node-template purge-chain --base-path /tmp/node01 --chain local -y
    ```
    If the path contains any data, the command prompts you to confirm the operation that you want to remove the chain data.
    
1. Start the first node using the custom chain specification by running the following command:
    
    ```bash
    ./target/release/node-template \
    --base-path /tmp/node01 \
    --chain ./customSpecRaw.json \
    --port 30333 \
    --ws-port 9945 \
    --rpc-port 9933 \
    --telemetry-url 'wss://telemetry.polkadot.io/submit/ 0' \
    --validator \
    --rpc-methods Unsafe \
    --name MyNode01
    ```
    
    Notice the following changes to the command you are running to start the node:
    
    * Instead of the predefined `--alice` account, you are using your own keys.
      You'll add your keys to the keystore in a separate step.
    
    * The `--chain` command-line option specifies the custom chain specification.
    
    * The `--name` command-line option enables you to give your node a human-readable name in the telemetry UI.
    
    * The `--rpc-methods Unsafe` command-line option allows you to continue the tutorial using an unsafe communication mode because your blockchain is not being used in a production setting.
    
    After running this command, you should see output similar to the following:
    
    ```bash
    2021-11-03 15:32:14 Substrate Node    
    2021-11-03 15:32:14 ‚úåÔ∏è  version 3.0.0-monthly-2021-09+1-bf52814-x86_64-macos    
    2021-11-03 15:32:14 ‚ù§Ô∏è  by Substrate DevHub <https://github.com/substrate-developer-hub>, 2017-2021    
    2021-11-03 15:32:14 üìã Chain specification: My Custom Testnet    
    2021-11-03 15:32:14 üè∑ Node name: MyNode01    
    2021-11-03 15:32:14 üë§ Role: AUTHORITY    
    2021-11-03 15:32:14 üíæ Database: RocksDb at /tmp/node01/chains/local_testnet/db    
    2021-11-03 15:32:14 ‚õì  Native runtime: node-template-100 (node-template-1.tx1.au1)    
    2021-11-03 15:32:15 üî® Initializing Genesis block/state (state: 0x2bde‚Ä¶8f66, header-hash: 0x6c78‚Ä¶37de)    
    2021-11-03 15:32:15 üë¥ Loading GRANDPA authority set from genesis on what appears to be first startup.    
    2021-11-03 15:32:15 ‚è±  Loaded block-time = 6s from block 0x6c78abc724f83285d1487ddcb1f948a2773cb38219c4674f84c727833be737de    
    2021-11-03 15:32:15 Using default protocol ID "sup" because none is configured in the chain specs    
    2021-11-03 15:32:15 üè∑ Local node identity is: 12D3KooWLmrYDLoNTyTYtRdDyZLWDe1paxzxTw5RgjmHLfzW96SX    
    2021-11-03 15:32:15 üì¶ Highest known block at #0    
    2021-11-03 15:32:15 „ÄΩÔ∏è Prometheus exporter started at 127.0.0.1:9615    
    2021-11-03 15:32:15 Listening for new connections on 127.0.0.1:9945.    
    2021-11-03 15:32:20 üí§ Idle (0 peers), best: #0 (0x6c78‚Ä¶37de), finalized #0 (0x6c78‚Ä¶37de), ‚¨á 0 ‚¨Ü 0    
    ```
    
    In the output, you should take note of the following information:
    
    * The **node identity** is `12D3KooWLmrYDLoNTyTYtRdDyZLWDe1paxzxTw5RgjmHLfzW96SX`.
    
    * The **IP address** is `127.0.0.1`.
    
    * The **peer-to-peer (p2p) port** is `--port = 30333`.
    
    These values are for this specific tutorial example. The values will be different for your node and you must provide the values for your node to other network participants to connect to the bootnode.

### Add keys to the keystore

After you start the first node, no blocks are yet produced. 
The next step is to add two types of keys to the keystore for each node in the network. 

For each node:

* Add the `aura` authority keys to enable [block _production_](/v3/getting-started/glossary#author).

* Add the grandpa authority keys to enable [block _finalization_](/v3/getting-started/glossary#finality).

There are several ways you can insert keys into the keystore.
For this tutorial, you can use the `key` subcommand to insert Keys saved to a local file.

To insert keys into the keystore:

1. Open a terminal shell on your computer.

1. Change to the root directory where you compiled the Substrate node template.

1. Insert the `aura` secret key directly or from a specified file into the keystore by running a command similar to the following:
    
    ```bash
    ./target/release/node-template key insert --base-path /tmp/node01 \
    --chain local \
    --suri 0x563d22ef5f00e589e07445a3ad88bb92efaa897d7f73a4543d9ac87476434e65 \
    --password-interactive \
    --key-type aura
    ```

1. Verify that your keys are in the keystore for `node01`by running the following command:
    
    ```bash
    ls /tmp/node01/chains/local_testnet/keystore
    ```
    
    The command displays output similar to the following:
    
    ```bash
    617572611441ddcb22724420b87ee295c6d47c5adff0ce598c87d3c749b776ba9a647f04
    ```

### Enable other participants to join

You can now allow other validators to join the network using the `--bootnodes` command-line option.

To add a second validator to the private network:

1. Open a **new** terminal shell on your computer.

1. Change to the root directory where you compiled the Substrate node template.

1. Start a second blockchain node using the `bob` account by running the following command:
    
    ```bash
    ./target/release/node-template \
    --base-path /tmp/node02 \
    --chain ./customSpecRaw.json \
    --port 30334 \
    --ws-port 9946 \
    --rpc-port 9934 \
    --telemetry-url 'wss://telemetry.polkadot.io/submit/ 0' \
    --validator \
    --rpc-methods Unsafe \
    --name MyNode02 \
    --bootnodes /ip4/127.0.0.1/tcp/30333/p2p/12D3KooWLmrYDLoNTyTYtRdDyZLWDe1paxzxTw5RgjmHLfzW96SX
    ```
    
    Be sure to set the correct bootnode identifier in the command.
    
    If you dont set the correct bootnode identifier, you see errors like this: 
    
    `üíî The bootnode you want to connect to at ... provided a different peer ID than the one you expect: ...`
    
    Notice that the command includes the `base-path` and `name` command-line options plus an additional `validator` options to specify that this node is a validator for the private network.

**Block production**: Now you _must_ also set the authoring keys in this node, just as we did
[for the first node](#add-keys-to-keystore). Note that you will need to communicate with your node
on the correct `ws-port` (so setting the app UI and submitting `curl` to the right port is critical)
A node will not be able to produce blocks if it has not added its Aura key!
**Block finalization**: This can _only_ happen if more than two-thirds of the validators have added their
GRANDPA keys to their keystores. Since this network was configured with two validators (in the
chain spec), block finalization can occur after the second node has added its keys (i.e. 50% < 66% < 100%).

**Reminder:** All validators must be using _identical chain specifications_ in order to peer. You should
see the same genesis block and state root hashes.

Once the second node is running _and_ it has an authoring key, you should see both nodes reporting block authoring:

```bash
2021-03-18 16:43:10  Substrate Node
2021-03-18 16:43:10  ‚úåÔ∏è  version 3.0.0-c528fd2-x86_64-linux-gnu
2021-03-18 16:43:10  ‚ù§Ô∏è  by Substrate DevHub <https://github.com/substrate-developer-hub>, 2017-2021
2021-03-18 16:43:10  üìã Chain specification: Local Testnet
2021-03-18 16:43:10  üè∑ Node name: MyNode02
2021-03-18 16:43:10  üë§ Role: AUTHORITY
2021-03-18 16:43:10  üíæ Database: RocksDb at /tmp/node02/chains/local_testnet/db
2021-03-18 16:43:10  ‚õì  Native runtime: node-template-100 (node-template-1.tx1.au1)
2021-03-18 16:43:10  Using default protocol ID "sup" because none is configured in the chain specs
2021-03-18 16:43:10  üè∑ Local node identity is: 12D3KooWDfpXmPtsvLCFTh4mKybYi6MvDMDiUrnRDcGZiSTR2GHp
2021-03-18 16:43:10  üì¶ Highest known block at #1
2021-03-18 16:43:10  Listening for new connections on 127.0.0.1:9946.
2021-03-18 16:43:11  üîç Discovered new external address for our node: /ip4/127.0.0.1/tcp/30334/p2p/12D3KooWDfpXmPtsvLCFTh4mKybYi6MvDMDiUrnRDcGZiSTR2GHp
2021-03-18 16:43:12  üôå Starting consensus session on top of parent 0x700fda8b9c7574553eccc8acc72e2dec59e40711e743223d67c3e5b57e1f76ef
2021-03-18 16:43:12  ‚ôªÔ∏è  Reorg on #1,0x700f‚Ä¶76ef to #2,0xe111‚Ä¶c084, common ancestor #0,0x2776‚Ä¶8ba7
2021-03-18 16:43:12  ‚ú® Imported #2 (0xe111‚Ä¶c084)
2021-03-18 16:43:12  Timeout fired waiting for transaction pool at block #1. Proceeding with production.
2021-03-18 16:43:12  üéÅ Prepared block for proposing at 2 [hash: 0xc590a846ff17871ffdcdd670914321f667cd6ad0b898bfb6d25f7dd68fff478b; parent_hash: 0x700f‚Ä¶76ef; extrinsics (1): [0x34d6‚Ä¶ed56]]
2021-03-18 16:43:12  üîñ Pre-sealed block for proposal at 2. Hash now 0x38b29b343d8f6ef56286a2f3aad20c82ae75d5bb0698569dd06fca654dae6fa6, previously 0xc590a846ff17871ffdcdd670914321f667cd6ad0b898bfb6d25f7dd68fff478b.
2021-03-18 16:43:12  ‚ú® Imported #2 (0x38b2‚Ä¶6fa6)
2021-03-18 16:43:15  üí§ Idle (1 peers), best: #2 (0xe111‚Ä¶c084), finalized #0 (0x2776‚Ä¶8ba7), ‚¨á 1.4kiB/s ‚¨Ü 1.4kiB/s
```

The final lines shows that your node has peered with another (**`1 peers`**), and they have produced
a block (**`best: #2 (0xe111‚Ä¶c084)`**)!

But do notice that even after you add the GRANDPA key for the second node no block finalization has
happened (**`finalized #0 (0x2776‚Ä¶8ba7)`**).
**Substrate nodes require a restart after inserting a GRANDPA key.**
Kill your nodes and restart them with the same commands you used previously.
Now blocks should be finalized!

```bash
...
2021-03-18 16:47:47  üí§ Idle (1 peers), best: #46 (0xfaf1‚Ä¶02f8), finalized #44 (0x9b08‚Ä¶09ea), ‚¨á 1.3kiB/s ‚¨Ü 1.3kiB/s
2021-03-18 16:47:48  ‚ú® Imported #47 (0x7375‚Ä¶aa51)
2021-03-18 16:47:52  üí§ Idle (1 peers), best: #47 (0x7375‚Ä¶aa51), finalized #45 (0x7c13‚Ä¶7575), ‚¨á 0.8kiB/s ‚¨Ü 0.6kiB/s
2021-03-18 16:47:54  üôå Starting consensus session on top of parent 0x73757e1773e6d86a9ef4a3ec9c3a55eef04345705c0a51f04445af657184aa51
2021-03-18 16:47:54  üéÅ Prepared block for proposing at 48 [hash: 0xd9ef428ccd38426a47a9eca181b508630e327b35ef4c468103ce59fa861e60f6; parent_hash: 0x7375‚Ä¶aa51; extrinsics (1): [0x16f0‚Ä¶dbe6]]
2021-03-18 16:47:54  üîñ Pre-sealed block for proposal at 48. Hash now 0x23a93d8e6bbbcf9f36e61264cc3a48a426a7f1112ff48df76f0d55b52c181156, previously 0xd9ef428ccd38426a47a9eca181b508630e327b35ef4c468103ce59fa861e60f6.
```

Congratulations! You've started your own private blockchain!

In this tutorial you've learned to generate your own keypairs, create a custom chain spec that uses
those keypairs, and start a private network based on your custom chain spec.

<Message
  type={`green`}
  title={`Tip`}
  text={`If you would like examples of correct JSON keystore \`curl\` files with a known working chainspec, see [this
  solution](https://github.com/substrate-developer-hub/substrate-node-template/tree/tutorials/solutions/private-chain-v3). 
  You can use the extra files with your already cloned and compiled node, no need to start from scratch.`}
/>

<!-- TODO link to the followup tutorial about starting a 3 node network using the demo substrate node
Details in https://github.com/substrate-developer-hub/tutorials/issues/16 -->

## Next steps

That big Wasm blob we encountered in the chain spec was necessary to enable forkless upgrades.
Learn more about how the [executor](/v3/advanced/executor) uses on-chain Wasm.
