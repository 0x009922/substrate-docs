---
title: Start a private network
slug: /tutorials/v3/private-network
hideNav: true
version: 3.0 
section: tutorials
category: private network
keywords: permissioned, consortium, authority, network
difficulty: 1
duration: 2 Hour
relevantSkills: 
  - Rust 
  - Blockchain basics
  - FRAME
---

This tutorial provides a basic introduction to the **consensus** model used in the Substrate node template and how to start a blockchain network with an
**authority set** of private **validators**.

All blockchains require the nodes in the network to agree on the set of messages and their order to successfully create blocks and progress from one block to the next.
Each block represents state at a specific point in time and the nodes agreement on the state is called consensus.
There are several differnt algorithms used to reach consensus, including:

* Proof of work consensus depends on the computational work done by validator nodes to add valid blocks to the chain.

* Proof of stake consensus selects the validators add valid blocks to the chain based on the cryptocurrency holdings that they have locked up as a stake in the network.

* Proof of authority consensus relies on a set of approved account identities to act as validators. The nodes associated with approved accounts have the authority to put transactions into blocks.

The Substrate node template uses a proof of authority consensus model also referred to as **authority round** or **Aura** consensus.
The Aura consensus protocol limits block production to a rotating list of authorized accounts‚Äî**authorities**‚Äîthat create blocks in a round robin fashion.

In this tutorial, you'll see how this consensus model works in practice, first, by using the predefined accounts that are part of the node template, then by adding a new authority to the approved set.

## Before you begin

<TutorialObjective
  data={{
    textLineOne:
      'Start the blockchain using predefined accounts.',
      url: '/tutorials/v3/private-network#alice-and-bob-start-blockchain',
  }}
/>
<TutorialObjective
  data={{
    textLineOne:
      'Generate keypairs for use as a network authority.',
    url: '#generate-your-own-keys',
  }}
/>
<TutorialObjective
  data={{
    textLineOne:
      'Create a custom chain specification file.',
    url: '#create-a-custom-chain-spec',
  }}
/>
<TutorialObjective
  data={{
    textLineOne:
      'Launch your private blockchain network.',
    url: '#launch-your-private-network',
  }}
/>

## Start the blockchain using predefined accounts

Before you generate keys to start your own private Substrate network, you can learn the fundamental principles using a predefined network specification called `local` and predefined user accounts.

For this part of the tutorial, you should have the Substrate node template running on a single local computer with predefined accounts that are named Alice and Bob.

### Start the blockchain as Alice

To start the blockchain:

1. Open a terminal shell on your computer.

1. Change to the root directory where you compiled the Substrate node template.

1. Purge old chain data by running the following command:
    
    ```bash
    ./target/release/node-template purge-chain --base-path /tmp/alice --chain local
    ```
    The command prompts you to confirm the operation.

    ```bash
    Are you sure to remove "/tmp/alice/chains/local_testnet/db"? [y/N]:
    ```

1. Type `y` to confirm that you want to remove the chain data.
    
    You should always remove old chain data when starting a new network.

1. Start the local blockchain node using the alice account by running the following command:
    
    ```bash
    ./target/release/node-template \
    --base-path /tmp/alice \
    --chain local \
    --alice \
    --port 30333 \
    --ws-port 9945 \
    --rpc-port 9933 \
    --node-key 0000000000000000000000000000000000000000000000000000000000000001 \
    --telemetry-url 'wss://telemetry.polkadot.io/submit/ 0' \
    --validator
    ```

#### Review the command-line options

Before moving on, let's take a closer look at the options used to start the node templates.

| <div style="min-width:110pt;font-weight:bold;">Option</div> | <div style="font-weight:bold;">Description</div> |
|:------------------------------ |: ---------------------------------------------- |
| `--base-path` | Specifies the directory for storing all of the data related to this chain. If you don't specify this option, a default path is used. If you specify a directory that doesn'o't exist, it is created for you. If the directory you specify already contains blockchain data, you must remove the data from the directory or choose a different location for the command to start the node to succeed. |
| `--chain local` | Specifies the chain specification to use. Valid predefined chain specifications include `local`, `development`, and `staging`. Generally, you would specify your own chain specification file. You'll see how to create your own chain specification file in a later step. |
| `--alice` | Places the predefined keys for the Alice account in the node's keystore. With this setting, the `alice` account is used for block production and finalization. Generally, you would generate your own keys and insert them with an RPC call. You'll see how to generate your own keys in a later step. |
| `--port 30333` | Specifies the port to listen on for p2p traffic. Port `30333` is the default. You can omit this option to use the default. Because this tutorial uses to nodes running on the same physical computer to simulate a network, you must explicitly specify a different port for at least one account. |
| `--ws-port 9945`  | Specifies the port to listen on for incoming WebSocket traffic. The default value is `9944`. This example uses a custom web socket port number (`9945`). |
| `--rpc-port 9933` | Specifies the port to listen on for incoming RPC traffic. Port `9933` is the default. You can omit this option to use the default. |
| `--node-key <key>` | Specifies the Ed25519 secret key to use for `libp2p` networking. The value is parsed as a hex-encoded Ed25519 32-byte secret key, that is, 64 hex characters. WARNING: Secrets provided as command-line arguments are easily exposed. You should only use this option for development and testing. |
| `--telemetry-url` | Specifies where to send telemetry data. For this tutorial, you can send telemetry data to a server hosted by Parity that is available for anyone to use. You can specify a differnet server or omit this option. |
| `--validator` | Specifies that this node participates in block production and finalization for the network. |

For more information about the command-line options that are available for started the node template, see the usage help by running the following command:

`./target/release/node-template --help`

#### Review the node messages displayed

If the node starts successfully, the terminal displays messages describing network operations. 
For example, you should see output similar to this:

```
2021-03-10 17:34:27  Substrate Node
2021-03-10 17:34:27  ‚úåÔ∏è  version 3.0.0-1c5b984-x86_64-linux-gnu
2021-03-10 17:34:27  ‚ù§Ô∏è  by Substrate DevHub <https://github.com/substrate-developer-hub>, 2017-2021
2021-03-10 17:34:27  üìã Chain specification: Local Testnet
2021-03-10 17:34:27  üè∑ Node name: Alice
2021-03-10 17:34:27  üë§ Role: AUTHORITY
2021-03-10 17:34:27  üíæ Database: RocksDb at /tmp/alice/chains/local_testnet/db
2021-03-10 17:34:27  ‚õì  Native runtime: node-template-100 (node-template-1.tx1.au1)
2021-03-10 17:34:27  üî® Initializing Genesis block/state (state: 0xea47‚Ä¶9ba8, header-hash: 0x9d07‚Ä¶7cce)
2021-03-10 17:34:27  üë¥ Loading GRANDPA authority set from genesis on what appears to be first startup.
2021-03-10 17:34:27  ‚è±  Loaded block-time = 6000 milliseconds from genesis on first-launch
2021-03-10 17:34:27  Using default protocol ID "sup" because none is configured in the chain specs
2021-03-10 17:34:27  üè∑ Local node identity is: 12D3KooWEyoppNCUx8Yx66oV9fJnriXwCcXwDDUA2kj6vnc6iDEp
2021-03-10 17:34:27  üì¶ Highest known block at #0
2021-03-10 17:34:27  „ÄΩÔ∏è Prometheus server started at 127.0.0.1:9615
2021-03-10 17:34:27  Listening for new connections on 127.0.0.1:9945.
2021-03-10 17:34:32  üí§ Idle (0 peers), best: #0 (0x9d07‚Ä¶7cce), finalized #0 (0x9d07‚Ä¶7cce), ‚¨á 0 ‚¨Ü 0
2021-03-10 17:34:37  üí§ Idle (0 peers), best: #0 (0x9d07‚Ä¶7cce), finalized #0 (0x9d07‚Ä¶7cce), ‚¨á 0 ‚¨Ü 0
...
```

There are a few key messages you should notice in the output displayed.

* `üî® Initializing Genesis block/state (state: 0xea47‚Ä¶9ba8, header-hash: 0x9d07‚Ä¶7cce)` identifies the initial or **genesis block** that the node is using. 
  When you start the next node, verify that these values are equal.

* `üè∑ Local node identity is: 12D3KooWEyoppNCUx8Yx66oV9fJnriXwCcXwDDUA2kj6vnc6iDEp` shows the peer ID that the node started by Bob will need from Alice's node. This value was determined by the `--node-key` that was used to start Alice's node.
   
* No blocks are being produced yet. Blocks will start being produced once another node joins the network.

### Attach a front-end to see information about the node

You can see a lot of information about node operations by watching the output it produces in your terminal.
You can also view information about node operations by using a web browser to access the Polkadot-JS graphical user interface.

To view node operations using the Polkadot-JS application:

1. Open a web browser.

1. Navigate to the
[Polkadot-JS Explorer](https://polkadot.js.org/apps/?rpc=ws%3A%2F%2F127.0.0.1%3A9945#/explorer).
    
  The Polkadot-JS Explorer link uses the `rpc` URL parameter to connect to the local node.

  Some browsers have ad blocking features that prevent connecting to a local node.
  If you have trouble connecting to the local node, see if you have ad blocking enabled and disable it, as needed. 
	If your braowser prevents connections to a local node, try using another browser, like Chromium or downloading and hosting the [Polkadot-JS application](https://github.com/polkadot-js/apps#development) locally.

1. Click the network icon displayed in the top left corner of the Polkadot-JS Explorer page.

  ![Display the list of networks](../../../src/images/tutorials/05-private-network/private-network-top-left-network-icon.png)

1. Expand **DEVELOPMENT** at the bottom of the list of networks available.

  ![Display DEVELOPMENT networks](../../../src/images/tutorials/05-private-network/polkadot-list-networks.png)

1. Verify the custom endpoint is set to `ws://127.0.0.1:9945`.
  
    You can use a single instance of the Polkadot-JS application to connect to different networks, nodes, and endpoints.
    For more information about using the Polkadot-JS application, see XXX.

    ![Custom endpoint](../../../src/images/tutorials/05-private-network/private-network-custom-endpoint.png)

    You should now see something like this displayed in the Polkadot-JS Explorer **Network** page.

    ![No blocks displayed in Polkadot-JS](../../../src/images/tutorials/05-private-network/private-network-no-blocks.png)

### Add a node to the blockchain network as Bob

Now that the node you started using the `alice` account keys is running, you can add another node to the network using the `bob` account.
Because you are joining a network that is already running, you can use the running node to bootstrap the new node.
The commands are similar to the ones you used before, but with a few important differences.

To add a node to the running blockchain:

1. Open a **new** terminal shell on your computer.

1. Change to the root directory where you compiled the Substrate node template.

1. Purge old chain data by running the following command:
        
    ```bash
    ./target/release/node-template purge-chain --base-path /tmp/bob --chain local
    ```

1. Start a second local blockchain node using the `bob` account by running the following command:
    
    ```bash
    ./target/release/node-template \
    --base-path /tmp/bob \
    --chain local \
    --bob \
    --port 30334 \
    --ws-port 9946 \
    --rpc-port 9934 \
    --telemetry-url 'wss://telemetry.polkadot.io/submit/ 0' \
    --validator \
    --bootnodes /ip4/127.0.0.1/tcp/30333/p2p/12D3KooWEyoppNCUx8Yx66oV9fJnriXwCcXwDDUA2kj6vnc6iDEp
    ```
    
    Take note of the following differences between this command and the previous on.
    
    * Because the two nodes are running on the same physical computer, you must specify different values for the `--base-path`, `--port`, `--ws-port`, and `--rpc-port` options.

    * This command includes the `--bootnodes` option and specifies a single boot node, the node started by `alice` using the following information:
      
      * The IP address for the running node. In this case, the IP address uses the IPv4 (`ip4`) format and the address for the localhost `127.0.0.1`.
      
      * The port number used for peer-to-peer communication. In this case, the port number for TCP traffic is `30333`.
      
      * The peer identifier for the running node that you made note of in the console output. In this case, `12D3KooWEyoppNCUx8Yx66oV9fJnriXwCcXwDDUA2kj6vnc6iDEp`.
      
      After a few seconds, the nodes should connect to each other as peers and start producing blocks. 
      You should see lines like the following in the console that started first node:
      
      ```
      ...
      2021-03-10 17:47:32  üîç Discovered new external address for our node: /ip4/127.0.0.1/tcp/30333/p2p/12D3KooWEyoppNCUx8Yx66oV9fJnriXwCcXwDDUA2kj6vnc6iDEp
      2021-03-10 17:47:32  üîç Discovered new external address for our node: /ip4/<your computer's LAN IP>/tcp/30333/p2p/12D3KooWEyoppNCUx8Yx66oV9fJnriXwCcXwDDUA2kj6vnc6iDEp
      2021-03-10 17:47:33  üí§ Idle (1 peers), best: #0 (0x9d07‚Ä¶7cce), finalized #0 (0x9d07‚Ä¶7cce), ‚¨á 1.0kiB/s ‚¨Ü 1.0kiB/s
      2021-03-10 17:47:36  üôå Starting consensus session on top of parent 0x9d07d1757a9ca248e58141ce52a11fca37f71007dec16650b87a853f0d4c7cce
      2021-03-10 17:47:36  üéÅ Prepared block for proposing at 1 [hash: 0x727826a5e6fba9a13af11422d4677b5f0743cc733c382232328e69fd307d1d2f; parent_hash: 0x9d07‚Ä¶7cce; extrinsics (1): [0x768a‚Ä¶a9e2]]
      2021-03-10 17:47:36  üîñ Pre-sealed block for proposal at 1. Hash now 0x4841d8b2e62483fa4702b3ddcd1b603803842374dcdc1e9533ad407708b33dd8, previously 0x727826a5e6fba9a13af11422d4677b5f0743cc733c382232328e69fd307d1d2f.
      2021-03-10 17:47:36  ‚ú® Imported #1 (0x4841‚Ä¶3dd8)
      2021-03-10 17:47:36  ‚ú® Imported #1 (0xb241‚Ä¶2ae8)
      2021-03-10 17:47:38  üí§ Idle (1 peers), best: #1 (0x4841‚Ä¶3dd8), finalized #0 (0x9d07‚Ä¶7cce), ‚¨á 0.8kiB/s ‚¨Ü 0.8kiB/s
      2021-03-10 17:47:42  ‚ôªÔ∏è  Reorg on #1,0x4841‚Ä¶3dd8 to #2,0x8b6a‚Ä¶dce6, common ancestor #0,0x9d07‚Ä¶7cce
      2021-03-10 17:47:42  ‚ú® Imported #2 (0x8b6a‚Ä¶dce6)
      2021-03-10 17:47:43  üí§ Idle (1 peers), best: #2 (0x8b6a‚Ä¶dce6), finalized #0 (0x9d07‚Ä¶7cce), ‚¨á 0.8kiB/s ‚¨Ü 0.7kiB/s
      2021-03-10 17:47:48  üôå Starting consensus session on top of parent 0x8b6a3ab2fe9891b1af008ea0d92dae9bc84cfa5578231e81066d47928822dce6
      2021-03-10 17:47:48  üéÅ Prepared block for proposing at 3 [hash: 0xb887aef2097eff5869e38ccec0302bce372ad05ac2cdf9cc4725c38ec071fb7a; parent_hash: 0x8b6a‚Ä¶dce6; extrinsics (1): [0x82ac‚Ä¶2f20]]
      2021-03-10 17:47:48  üîñ Pre-sealed block for proposal at 3. Hash now 0x34d608dd8be6b82bef4a7aaae1ec80930a5c4b8cf9bdc99013410e91544f3a2a, previously 0xb887aef2097eff5869e38ccec0302bce372ad05ac2cdf9cc4725c38ec071fb7a.
      2021-03-10 17:47:48  ‚ú® Imported #3 (0x34d6‚Ä¶3a2a)
      2021-03-10 17:47:48  üí§ Idle (1 peers), best: #3 (0x34d6‚Ä¶3a2a), finalized #0 (0x9d07‚Ä¶7cce), ‚¨á 0.7kiB/s ‚¨Ü 0.8kiB/s
      2021-03-10 17:47:53  üí§ Idle (1 peers), best: #3 (0x34d6‚Ä¶3a2a), finalized #1 (0xb241‚Ä¶2ae8), ‚¨á 0.6kiB/s ‚¨Ü 0.7kiB/s
      2021-03-10 17:47:54  ‚ú® Imported #4 (0x2b8a‚Ä¶fdc4)
      2021-03-10 17:47:58  üí§ Idle (1 peers), best: #4 (0x2b8a‚Ä¶fdc4), finalized #2 (0x8b6a‚Ä¶dce6), ‚¨á 0.7kiB/s ‚¨Ü 0.6kiB/s
      ...
      ```
      
      These lines show that the first node started by `alice` has a one peer (`1 peers`), they have produced some blocks (`best: #4 (0x2b8a‚Ä¶fdc4)`), and that the blocks are being finalized (`finalized #2 (0x8b6a‚Ä¶dce6)`).
      
      If you look at the console that started the second node, you should see similar output.

1. Open the [Polkadot-JS Explorer](https://polkadot.js.org/apps/?rpc=ws%3A%2F%2F127.0.0.1%3A9945#/explorer) to verify the network is producing and finalizing blocks.
    
    ![Blocks are produced and finalized](../../../src/images/tutorials/05-private-network/private-network-displays-blocks.png)

## Generate your own keys

Now that you know how to start and connect running nodes as peers using command-line options, you are ready to generate you own secret keys instead of using the predefined account keys. 
It's important to remember that each participant in the blockchain network is responsible for generating unique keys. 

There are several ways you can generate keys.
For example, you can generate keypairs using the (<a target="_blank" href="/v3/tools/subkey">Subkey</a>) command-line program, the Polkadot-JS application, or third-party key generation utilties.

Although you could use predefined keypairs to complete this tutorial, you would never use those keys in a production environment.
Instead of using predefined keys or the `subkey` program, this tutorial illustrates how to generate keys using the Polkadot-JS application.

### Use Polkadot-JS to generate keys

You have already used the Polkadot-JS application to see blocks being produced for the nodes managed by Alice and Bob.
You can also use the Polkadot-JS application to generate keys to use with Substrate.

For this tutorial, you remain connected to the internet and your local node to generate your keys. 
As a best practice, you should not be connected to the internet when you generate keys for a production blockchain. 
For a production environment, you should disconnect from the internet before you generate any keys.

To use the Polkadot-JS application to generate keys:

1. Open the [Polkadot-JS Explorer](https://polkadot.js.org/apps/?rpc=ws%3A%2F%2F127.0.0.1%3A9945#/explorer) in a web browser.

1. Click **Accounts**, then click **Add account**. 

1. Copy the mnemonic seed phrase and keep in a safe place.

1. Select the **I have saved my mnemonic safely** checkbox, then click **Next**.

1. Type a name and password for the account, then click **Next**.

1. Click **Save** to generate the `sr25519` key for the account.

    The `sr25519` key is used by Aura for block production. 

1. Note of the mnemonic phrase, and the SS58 address which can be copied by clicking on the identicon in the top left.

1. Generate an `ed25519` key which will be used by GRANDPA for block finalization. 
Note the mnemonic phrase and ss58 address.


##### Pair 1

| Key    | Value                                                                  |
| ------ | ---------------------------------------------------------------------- |
| Secret phrase | `clip organ olive upper oak void inject side suit toilet stick narrow` |
| Secret seed | `0x4bd2b2c1dad3dbe3fa37dc6ad5a4e32ddd8ad84b938179ac905b0622880e86e7` |
| **SR25519** |                                                               |
| Public key | `0x9effc1668ca381c242885516ec9fa2b19c67b6684c02a8a3237b6862e5c8cd7e` |
| SS58 Address `5FfBQ3kwXrbdyoqLPvcXRp7ikWydXawpNs2Ceu3WwFdhZ8W4` |
| **ED25519** |                                                   |
| Public key | `0xb48004c6e1625282313b07d1c9950935e86894a2e4f21fb1ffee9854d180c781` |
| SS58 Address `5G9NWJ5P9uk7am24yCKeLZJqXWW6hjuMyRJDmw4ofqxG8Js2` |

##### Pair 2

| Key | Value |
| ------ | ---------------------------------------------------------------------- |
| Secret phrase | `paper next author index wedding frost voice mention fetch waste march tilt` |
| Secret seed | `0x4846fedafeed0cf307da3e2b5dfa61415009b239119242006fc8c0972dde64b0` |
| **SR25519**   |                                                                              |
| Public key | `0x74cca68a32156615a5923c67024db70da5e7ed36e70c8cd5bcf3556df152bb6d`         |
| SS58 Address | `5EhrCtDaQRYjVbLi7BafbGpFqcMhjZJdu8eW8gy6VRXh6HDp`                           |
| **ED25519**   |                                                                              |
| Public key | `0x0fe9065f6450c5501df3efa6b13958949cb4b81a2147d68c14ad25366be1ccb4`         |
| SS58 Address | `5CRZoFgJs4zLzCCAGoCUUs2MRmuD5BKAh17pWtb62LMoCi9h`                           |

After you generate the keys to use with your blockchain, you are ready to create a custom **chain specification** using those key pairs then share your custom chain specicification with trusted network participants called **validators**.

## Create a custom chain specification

To enable others to participate in your blockchain network, you should ensure that they generate their own keys. 
If other participants have generated their key pairs, you can create a custom chain specification to replace the `local` chain specification that you used previously.

This tutorial shows you hows to create a two-node network.
You can follow the same steps to add more nodes to your network.

### Modify an existing chain specification

Previously, you added nodes to the blockchain using the predefined `local` chain specification using the `--chain local` command-line option. 
Instead of writing a completely new chain specicification, you can modify the exisitng one that you used before. 

To create a new chain specification based on an exisitng one:

1. Open a terminal shell on your computer.

1. Change to the root directory where you compiled the Substrate node template.

1. Export the local chain specicification to a file named `customSpec.json` by running the following command: 
    
    ```bash
    ./target/release/node-template build-spec --disable-default-bootnode --chain local > customSpec.json
    ```

    If you were to open the `customSpec.json` file in a text editor, you would see that it contains several fields, including a large blob that contains the Wasm binary for the runtime you built using the `cargo build --release` command.
    Instead of viewing the entire file, let's look at the first and last few lines.

1. View the first few fields in the `customSpec.json` file by running the following command:
    
    ```bash
    head customSpec.json
    ```

    The command displays the first fields from the file.
    For example:

    ```bash
    {
      "name": "Local Testnet",
      "id": "local_testnet",
      "chainType": "Local",
      "bootNodes": [],
      "telemetryEndpoints": null,
      "protocolId": null,
      "properties": null,
      "consensusEngine": null,
      "codeSubstitutes": {},
    ```

1. View the last fields in the `customSpec.json` file by running the following command:
    
    ```bash
    tail -n 80 customSpec.json
    ```
    
    This command displays the last sections following the Wasm binary field, including the details for several of the pallets‚Äîsuch as the `sudo` and `balances` pallets‚Äîthat are used in the runtime.

1. Open the `customSpec.json` file in a text editor.

1. Modify the `name` field to identify this chain specification as a custom chain specification.
    
    For example:

    ```json
    "name": "My Custom Testnet",
    ```

1. Modify `aura` field to specify the authority nodes that should be used for creating blocks.
    
    ```json
    "aura": {
      "authorities": [
        "5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY",
        "5FHneW46xGXgs5mUiveU4sbTyGBzmstUspZC92UhjJM694ty"
      ]
    },
    ```

    Use the SR25519 SS58 address keys for the key pairs you previously generated.

1. Modify the `grandpa` field to specify the authorities that should be used for finalizing blocks. 
    
    ```json
    "grandpa": {
      "authorities": [
          [
            "5FA9nQDVg267DEd8m1ZypXLBnvN7SFxYwV7ndqSYGiN9TTpu",
            1
          ],
          [
            "5GoNkf6WdbxCFnPdAnYYQyCjAKPJgLNxXwPjwTh6DGg6gN3E",
            1
          ]
        ]
      },
      ```

      Use the ED25519 SS58 address keys for the key pairs you previously generated.
      
      You might notice that there are two data values for the Grandpa `authorities` field. The first value is the address key. The second value is used to support **weighted votes**. In this example, each validator has a weight of **1** vote.

1. Save your changes and close the file.

### Add validators

As you have just seen, you can add and change the authority addresses in a chain specification by modifying the `aura` and `grandpa` sections. 
You can use this technique to add as many validators as
you like.

To add validators:

* Modify the `aura` section to include **SR25519** addresses.

* Modify the `grandpa` section to include **ed25519** addresses and a voting weight. 
 
Be sure to use unique keys for each validator. 
If two validators have the same keys, they produce conflicting blocks. 

For additional information about working with key pairs and signatures, see
[Public-Key cryptography](/v3/advanced/cryptography#public-key-cryptography).

### Convert the chain specification to use the raw format

After you prepare a chain specification with the information you want to use, you must convert it into a raw specification before it can be used. 
The raw chain specification includes all of the same information as the unconverted specification.
However, the raw chain specification also contains encoded storage keys that the node uses to reference the data in its local storage. 
Distributing a raw chain specification ensures that each node stores the data using the proper storage keys.

To convert a chain specification to use the raw format:

1. Open a terminal shell on your computer.

1. Change to the root directory where you compiled the Substrate node template.

1. Convert the `customSpec.json` chain specicification to the raw format with the file name `customSpecRaw.json` by running the following command: 
    
    ```bash
    ./target/release/node-template build-spec --chain=customSpec.json --raw --disable-default-bootnode > customSpecRaw.json
    ```

### Share the chain specification with others

If you are creating a private blockchain network to share with other participants, you should ensure that only one person creates the chain specifiction and shares the resulting raw version of the specification‚Äîfor example, the `customSpecRaw.json` file‚Äîwith all of the other validators in the network. 

Because Rust builds that produce WebAssembly optimized binaries aren't reproducible, each person who generates the Wasm runtime would produce a slightly different Wasm blob. 
To ensure determinism, all participants in the blockchain network should use the same raw chain specification file.
For more information about this issue, see [Hunting down a non-determinism-bug in our Rust Wasm build](https://dev.to/gnunicorn/hunting-down-a-non-determinism-bug-in-our-rust-wasm-build-4fk1).

## Launch the private network

After you distribute the custom chain specification to all network participants, you're ready to launch your own private blockchain. 
The steps are similar to the steps you followed in [Start the blockchain using predefined accounts](#Start-the-blockchain-using-predefined-accounts). 
For this part of the tutorial, you are no longer required to use a single physical computer or a single binary.

### Start a first node

As the first participant in the private blockchain network, you are responsible for starting the first node, called the **bootnode**.

To start the first node:

1. Open a terminal shell on your computer.

1. Change to the root directory where you compiled the Substrate node template.

1. Purge old chain data by running the following command:
    
    ```bash
    ./target/release/node-template purge-chain --base-path /tmp/node01 --chain local -y
    ```
    The command prompts you to confirm the operation.

    ```bash
    Are you sure to remove "/tmp/alice/chains/local_testnet/db"? [y/N]:
    ```

1. Type `y` to confirm that you want to remove the chain data.
    


```bash
# purge chain (only required for new/modified dev chain spec)
```

```bash
# start node01
./target/release/node-template \
  --base-path /tmp/node01 \
  --chain ./customSpecRaw.json \
  --port 30333 \
  --ws-port 9945 \
  --rpc-port 9933 \
  --telemetry-url 'wss://telemetry.polkadot.io/submit/ 0' \
  --validator \
  --rpc-methods Unsafe \
  --name MyNode01
```

Here are some differences from ed as Alice.

- Omitted the `--alice` flag. 
  Instead, you will insert your own custom keys into the keystore through the RPC shortly.
- The `--chain` flag has changed to use the custom chain specification.
- The optional `--name` flag. 
  You may use it to give your node a human-readable name in the telemetry UI.
- The optional `--rpc-methods Unsafe` flag has been added. 
  As the name indicates, this flag is not safe to use in a production setting, but it allows this tutorial to stay focused on the topic at hand.

You should see console output similar to the following:

```bash
2021-03-10 18:32:15  Substrate Node
2021-03-10 18:32:15  ‚úåÔ∏è  version 3.0.0-1c5b984-x86_64-linux-gnu
2021-03-10 18:32:15  ‚ù§Ô∏è  by Substrate DevHub <https://github.com/substrate-developer-hub>, 2017-2021
2021-03-10 18:32:15  üìã Chain specification: Local Testnet
2021-03-10 18:32:15  üè∑ Node name: MyNode01
2021-03-10 18:32:15  üë§ Role: AUTHORITY
2021-03-10 18:32:15  üíæ Database: RocksDb at /tmp/node01/chains/local_testnet/db
2021-03-10 18:32:15  ‚õì  Native runtime: node-template-100 (node-template-1.tx1.au1)
2021-03-10 18:32:16  üî® Initializing Genesis block/state (state: 0xea47‚Ä¶9ba8, header-hash: 0x9d07‚Ä¶7cce)
2021-03-10 18:32:16  üë¥ Loading GRANDPA authority set from genesis on what appears to be first startup.
2021-03-10 18:32:16  ‚è±  Loaded block-time = 6000 milliseconds from genesis on first-launch
2021-03-10 18:32:16  Using default protocol ID "sup" because none is configured in the chain specs
2021-03-10 18:32:16  üè∑ Local node identity is: 12D3KooWJvVUoAa7R8gjCSQ45x69Ahh3HcdVSH1dvpcA52vKawHL
2021-03-10 18:32:16  üì¶ Highest known block at #0
2021-03-10 18:32:16  „ÄΩÔ∏è Prometheus server started at 127.0.0.1:9615
2021-03-10 18:32:16  Listening for new connections on 127.0.0.1:9944.
2021-03-10 18:32:21  üí§ Idle (0 peers), best: #0 (0x9d07‚Ä¶7cce), finalized #0 (0x9d07‚Ä¶7cce), ‚¨á 0 ‚¨Ü 0
2021-03-10 18:32:26  üí§ Idle (0 peers), best: #0 (0x9d07‚Ä¶7cce), finalized #0 (0x9d07‚Ä¶7cce), ‚¨á 0 ‚¨Ü 0
```

Here you must take note of: 
- the **node identity**: `12D3KooWJvVUoAa7R8gjCSQ45x69Ahh3HcdVSH1dvpcA52vKawHL`
- the **IP address** `127.0.0.1`
- the p2p port `--port = 30333`

These values are for this specific
example, but for your node, they will be different and **required for other nodes to directly connect to it** 
(without a bootnode in the chain spec, as we removed in the flags before).

### Add keys to the keystore

Once your node is running, you will again notice that no blocks are being produced. At this point,
you need to add your keys into the keystore. Remember you will need to complete these steps for each
node in your network. You will add two types of keys for each node: Aura and GRANDPA keys. Aura keys
are necessary for
[block _production_](/v3/getting-started/glossary#author);
GRANDPA keys are necessary for
[block _finalization_](/v3/getting-started/glossary#finality).

#### Option 1: Use the Polkadot-JS Apps UI

You can use the Apps UI to insert your keys into the keystore. Navigate to "Developer --> RPC Call". Choose
"author" and "insertKey". The fields can be filled like this:

![Inserting a Aura key using Apps](../../../src/images/tutorials/05-private-network/private-network-apps-insert-key-aura.png)

```
keytype: aura
suri: <your mnemonic phrase> (eg. clip organ olive upper oak void inject side suit toilet stick narrow)
publicKey: <your raw sr25519 key> (eg. 0x9effc1668ca381c242885516ec9fa2b19c67b6684c02a8a3237b6862e5c8cd7e)
```

<Message
  type={`gray`}
  title={`Note`}
  text=
      "If you generated your keys with the Apps UI you will not know your raw public key. In this case
      you may use your SS58 address (`5FfBQ3kwXrbdyoqLPvcXRp7ikWydXawpNs2Ceu3WwFdhZ8W4`) instead.
      "
/>

You've now successfully inserted your
[**Aura**](/v3/getting-started/glossary#aura-aka-authority-round)
key. You can repeat those steps to insert your
[**GRANDPA**](/v3/getting-started/glossary#grandpa) key (the
**ed25519** key)

![Inserting a GRANDPA key using Apps](../../../src/images/tutorials/05-private-network/private-network-apps-insert-key-gran.png)

```
keytype: gran
suri: <your mnemonic phrase> (eg. clip organ olive upper oak void inject side suit toilet stick narrow)
publicKey: <your raw ed25519 key> (eg. 0xb48004c6e1625282313b07d1c9950935e86894a2e4f21fb1ffee9854d180c781)
```
<Message
  type={`gray`}
  title={`Note`}
  text=
      "If you are following these steps for the _second_ node in the network, you must connect the UI to 
      the second node before inserting the keys.
      "
/>

#### Option 2: Use `curl`

You can also insert a key into the keystore by using [`curl`](https://curl.haxx.se/) from the
command line. This approach may be preferable in a production setting, where you may be using a
cloud-based virtual private server.

Because security is of the utmost concern in a production environment, it is important to take every
precaution possible. In this case, that means taking care that you do not leave any traces of your
keys behind, such as in your terminal's history. Create a file that you will use to define the body
for your `curl` request:

```json
{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "author_insertKey",
  "params": ["<aura/gran>", "<mnemonic phrase>", "<public key>"]
}
```

```bash
# Submit a new key via RPC, connect to where your `rpc-port` is listening
curl http://localhost:9933 -H "Content-Type:application/json;charset=utf-8" -d "@/path/to/file"
```

If you enter the command and parameters correctly, the node will return a JSON response as follows.

```json
{ "jsonrpc": "2.0", "result": null, "id": 1 }
```

Make sure you delete the file that contains the keys one.

#### Option 3: Use the `key` command

Alternatively, you can insert a key saved to a local file using the `key` command:

```bash
# Insert the key from /path/to/key/file into the keystore
./target/release/node-template key insert --base-path /tmp/node01 --chain local --key-type <aura/gran> --suri /path/to/key/file
```

### Verify keys in the keystore (Optional)

Optionally, If you would like to check that your keys are now loaded, you can view the keystore files that should
now exists for your `node01`. These are found in the following (default example) location:

```bash
# The path stems from `--base-path` and ID from `chain_spec.rs` ID field.
# Keys are then in `chains/<chain ID>/keystore :
ls /tmp/node01/chains/local_testnet/keystore
```

```bash
## list of keystore files:
617572619effc1668ca381c242885516ec9fa2b19c67b6684c02a8a3237b6862e5c8cd7e
6772616eb48004c6e1625282313b07d1c9950935e86894a2e4f21fb1ffee9854d180c781

# read a keystore file (our demo seed 1 was used)
cat /tmp/node01/chains/local_testnet/keystore/617572619effc1668ca381c242885516ec9fa2b19c67b6684c02a8a3237b6862e5c8cd7e
"clip organ olive upper oak void inject side suit toilet stick narrow"
```

Notice there are two keystores, as expected as we added two keys to our node.
This example used [pair 1](#option-3-use-pre-generated-keys) from the well known seeds here, and
will use `pair 2` for our next node, where your keys may differ.

<!-- TODO: update below with example of successful use (not working for me at time of writing) -->

<!--
You can also set a non-standard keystore file for your node with the flags:
  keystore-path <PATH> - Specify custom keystore path
  keystore-uri <keystore-uri> - Specify custom URIs to connect to for keystore-services
-->

### Subsequent Participants Join

Subsequent validators can now join the network. 
This can be done by specifying the `--bootnodes` parameter as Bob did previously.

```bash
# purge chain (only required for new/modified dev chain spec)
./target/release/node-template purge-chain --base-path /tmp/node02 --chain local -y

# start node02
./target/release/node-template \
  --base-path /tmp/node02 \
  --chain ./customSpecRaw.json \
  --port 30334 \
  --ws-port 9946 \
  --rpc-port 9934 \
  --telemetry-url 'wss://telemetry.polkadot.io/submit/ 0' \
  --validator \
  --rpc-methods Unsafe \
  --name MyNode02 \
  --bootnodes /ip4/127.0.0.1/tcp/30333/p2p/12D3KooWAvdwXzjmRpkHpz8PzUTaX1o23SdpgAWVyTGMSQ68QXK6
  # you MUST fill the correct info in the line above:
  # --bootnodes /ip4/<IP Address>/tcp/<p2p Port>/p2p/<Peer ID>
```

<Message
  type={`red`}
  title={`Warning`}
  text=
    "Make sure you set the correct node ID! If you didn\'t set the correct node ID gathered from another running with the same chain spec,
    but only the right IP - you will get errors of the form: 
    `üíî The bootnode you want to connect to at ... provided a different peer ID than the one you expect: ...`
    "
/>

As before, we specify another `base-path`, give it another `name`, and also specify this node as a
`validator`.

**Block production**: Now you _must_ also set the authoring keys in this node, just as we did
[for the first node](#add-keys-to-keystore). Note that you will need to communicate with your node
on the correct `ws-port` (so setting the app UI and submitting `curl` to the right port is critical)
A node will not be able to produce blocks if it has not added its Aura key!
**Block finalization**: This can _only_ happen if more than two-thirds of the validators have added their
GRANDPA keys to their keystores. Since this network was configured with two validators (in the
chain spec), block finalization can occur after the second node has added its keys (i.e. 50% < 66% < 100%).

**Reminder:** All validators must be using _identical chain specifications_ in order to peer. You should
see the same genesis block and state root hashes.

Once the second node is running _and_ it has an authoring key, you should see both nodes reporting block authoring:

```bash
2021-03-18 16:43:10  Substrate Node
2021-03-18 16:43:10  ‚úåÔ∏è  version 3.0.0-c528fd2-x86_64-linux-gnu
2021-03-18 16:43:10  ‚ù§Ô∏è  by Substrate DevHub <https://github.com/substrate-developer-hub>, 2017-2021
2021-03-18 16:43:10  üìã Chain specification: Local Testnet
2021-03-18 16:43:10  üè∑ Node name: MyNode02
2021-03-18 16:43:10  üë§ Role: AUTHORITY
2021-03-18 16:43:10  üíæ Database: RocksDb at /tmp/node02/chains/local_testnet/db
2021-03-18 16:43:10  ‚õì  Native runtime: node-template-100 (node-template-1.tx1.au1)
2021-03-18 16:43:10  Using default protocol ID "sup" because none is configured in the chain specs
2021-03-18 16:43:10  üè∑ Local node identity is: 12D3KooWDfpXmPtsvLCFTh4mKybYi6MvDMDiUrnRDcGZiSTR2GHp
2021-03-18 16:43:10  üì¶ Highest known block at #1
2021-03-18 16:43:10  Listening for new connections on 127.0.0.1:9946.
2021-03-18 16:43:11  üîç Discovered new external address for our node: /ip4/127.0.0.1/tcp/30334/p2p/12D3KooWDfpXmPtsvLCFTh4mKybYi6MvDMDiUrnRDcGZiSTR2GHp
2021-03-18 16:43:12  üôå Starting consensus session on top of parent 0x700fda8b9c7574553eccc8acc72e2dec59e40711e743223d67c3e5b57e1f76ef
2021-03-18 16:43:12  ‚ôªÔ∏è  Reorg on #1,0x700f‚Ä¶76ef to #2,0xe111‚Ä¶c084, common ancestor #0,0x2776‚Ä¶8ba7
2021-03-18 16:43:12  ‚ú® Imported #2 (0xe111‚Ä¶c084)
2021-03-18 16:43:12  Timeout fired waiting for transaction pool at block #1. Proceeding with production.
2021-03-18 16:43:12  üéÅ Prepared block for proposing at 2 [hash: 0xc590a846ff17871ffdcdd670914321f667cd6ad0b898bfb6d25f7dd68fff478b; parent_hash: 0x700f‚Ä¶76ef; extrinsics (1): [0x34d6‚Ä¶ed56]]
2021-03-18 16:43:12  üîñ Pre-sealed block for proposal at 2. Hash now 0x38b29b343d8f6ef56286a2f3aad20c82ae75d5bb0698569dd06fca654dae6fa6, previously 0xc590a846ff17871ffdcdd670914321f667cd6ad0b898bfb6d25f7dd68fff478b.
2021-03-18 16:43:12  ‚ú® Imported #2 (0x38b2‚Ä¶6fa6)
2021-03-18 16:43:15  üí§ Idle (1 peers), best: #2 (0xe111‚Ä¶c084), finalized #0 (0x2776‚Ä¶8ba7), ‚¨á 1.4kiB/s ‚¨Ü 1.4kiB/s
```

The final lines shows that your node has peered with another (**`1 peers`**), and they have produced
a block (**`best: #2 (0xe111‚Ä¶c084)`**)!

But do notice that even after you add the GRANDPA key for the second node no block finalization has
happened (**`finalized #0 (0x2776‚Ä¶8ba7)`**).
**Substrate nodes require a restart after inserting a GRANDPA key.**
Kill your nodes and restart them with the same commands you used previously.
Now blocks should be finalized!

```bash
...
2021-03-18 16:47:47  üí§ Idle (1 peers), best: #46 (0xfaf1‚Ä¶02f8), finalized #44 (0x9b08‚Ä¶09ea), ‚¨á 1.3kiB/s ‚¨Ü 1.3kiB/s
2021-03-18 16:47:48  ‚ú® Imported #47 (0x7375‚Ä¶aa51)
2021-03-18 16:47:52  üí§ Idle (1 peers), best: #47 (0x7375‚Ä¶aa51), finalized #45 (0x7c13‚Ä¶7575), ‚¨á 0.8kiB/s ‚¨Ü 0.6kiB/s
2021-03-18 16:47:54  üôå Starting consensus session on top of parent 0x73757e1773e6d86a9ef4a3ec9c3a55eef04345705c0a51f04445af657184aa51
2021-03-18 16:47:54  üéÅ Prepared block for proposing at 48 [hash: 0xd9ef428ccd38426a47a9eca181b508630e327b35ef4c468103ce59fa861e60f6; parent_hash: 0x7375‚Ä¶aa51; extrinsics (1): [0x16f0‚Ä¶dbe6]]
2021-03-18 16:47:54  üîñ Pre-sealed block for proposal at 48. Hash now 0x23a93d8e6bbbcf9f36e61264cc3a48a426a7f1112ff48df76f0d55b52c181156, previously 0xd9ef428ccd38426a47a9eca181b508630e327b35ef4c468103ce59fa861e60f6.
```

Congratulations! You've started your own private blockchain!

In this tutorial you've learned to generate your own keypairs, create a custom chain spec that uses
those keypairs, and start a private network based on your custom chain spec.

<Message
  type={`green`}
  title={`Tip`}
  text={`If you would like examples of correct JSON keystore \`curl\` files with a known working chainspec, see [this
  solution](https://github.com/substrate-developer-hub/substrate-node-template/tree/tutorials/solutions/private-chain-v3). 
  You can use the extra files with your already cloned and compiled node, no need to start from scratch.`}
/>

<!-- TODO link to the followup tutorial about starting a 3 node network using the demo substrate node
Details in https://github.com/substrate-developer-hub/tutorials/issues/16 -->

## Next steps

That big Wasm blob we encountered in the chain spec was necessary to enable forkless upgrades.
Learn more about how the [executor](/v3/advanced/executor) uses on-chain Wasm.
